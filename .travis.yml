# do not modify this file. it is generated from configs/travis/base.travis.yml
language: python

services:
  - redis-server
  - memcached
  - postgresql

install:
  - sudo apt-get install -qq libmemcached-dev
  - pip install -r configs/requirements/travis.txt --use-mirrors -q

before_script:
  - psql -c 'create database django_canadanewyork;' -U postgres

script:
  - flake8 .
  - python manage.py test tests

after_success:
  - wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh
  - git remote add heroku git@heroku.com:canada-development.git
  - echo "Host heroku.com" >> ~/.ssh/config
  - echo "   StrictHostKeyChecking no" >> ~/.ssh/config
  - echo "   CheckHostIP no" >> ~/.ssh/config
  - echo "   UserKnownHostsFile=/dev/null" >> ~/.ssh/config
  - heroku keys:clear
  - yes | heroku keys:add
  - yes | git push heroku master

notifications:
  email: false

env:
  global:
    - secure: "LhbKu813AJ5NwHnV7Qu3Xe99SQ0zJr1HJ4gyuJ93B1o4vBBu41nJttYGuC7J\nPe4lppfIkrhav2mCr02YXh+BD9Fq+JIZ1IDTO+gqyT7Gi7l69zzuk5Z1aZCS\npzzF+9wJCusIaabl7G9kGOIWEE9+lc3WdBjX3QlLMupJJN2m4FQ="
    - secure: "LEevanpeF62+B6FNNZlwsG5nLzQmpXFpePp2W4Nxrn5kZdCd7fl9S7498ULU\nC3akhz+H0MrWm0jsWMZADIVsdeyPPN5cAm6wm/HWllb/h5e7N+HiBZYRszki\nLlGr+zUH3EVN1Av74vTpEmcLLedrrqiL7v+tJhW9oY8RnhFOELw="
    - secure: "cmIAO/OTMAjbKfa3BY4VDz9ONDNK/v247pmYNK2lr4wGdKa5sRuwBlN4R5eH\nVR96ywxkR1I71I1sCMN1geq4/tbX5OsJddqCS4QrAYwK6PwWPghnbkFu00b0\nygpNldKGAwyb2r7f9mnkQ+4MTAdD6WEcxInjAiN+5iv0KcoMb8o="
    - secure: "wmN74QHOUIDth4xTemEUTrZ2oGvHtYGuX8k+9kRiwUTp2NIrxADbbf3ZoQEB\nuvC1SSsSwzZqGspIDo6ViKGLZ552cSXK2UgSlv+OqIghRFw1b2rCMAsSgXGI\n9PDAaZ190BCgmPXtzuEZr6p9l6qZXQg8/55Lg2xbhJIsuXDaVQ8="
    - secure: "EzuY6+MWUYE3Cf4K1Sf809eLu2C35530hFSu0CWXWuhjrUzSml5kwTzkQQnr\naCu2na8Qj0L4jHvz2Pha8YJlgMJWuxg7dxZmMeNUBLlA8+BubiRIX23eChOm\nvV7y42OiAaQoS3aDFKT5rSPJK9RC59ayLPm3OoDceTmchb5izlw="
    - secure: "lLzxV6wka3udTAXJ6ll1r4esacJqD0NWBERq7wprO1tPel2dhTzLB7CX3B0M\nrwJ7K11iZf1kdEiISBKZqfgwnI9rqELqtAwGVoscJOj2bvjnOrCBaSXz28Xn\na84SG52LUb4+seghxpQgPDks9NygF5UNb3H5l/pNOIvtrgrBlsE="
    - secure: "UWuKkWGedki7ZDX2+1HbjWmgCXCHyAEhkcCUmtcqapzWne+/dbQ9ZQQBfFIz\nbpIoZOgibIUZgweL/snl1Z57a77u86yulIS5ONyoFcjePKPOGTJtOQ+H3Jea\n+J/iN00PA6ZD821trrRTf89Mral3Whx/SY3pnNp9tPU69iZb/A8="
    - secure: "cevcE+xvL705F9qToKFL/QniElLR5dq3Rz+hLv35ftLEH0BFiCyXcMgr8QbI\n0NJwZvZOesRKAFrZKKezXxqF63QRV1J9PzTA9DTKEdZap7lOdfYJOhcHjia7\ne12+poy7J8GjveyWQruirsxr7FUC1HUwYO0D7N2Vg09zT6V1ITA="
    - secure: "g58fBTT5Z4uAcWFa6TDjGsDEW+BvIOwj+lezSNKZhW5spLj2omBTnAt/mQCK\nUz3S1BNpWyrfCpteb0wGgzqSeuylR4ZrtxJ8nW22tDf8PSSzOnoqTCfhQkHZ\nmeJnbfF6Ec23W6jB/vcAMqWQ5xF0cw1BBOL8YeWmP9pwCHkg+3Y="
    - secure: "iWIxzh4iSp62mJYrUNdX1z5/UaieEaUgruOhQVHeuxN1oruYd7Accxj2ta5o\nRrD9PO/ZUdypmqP7S4vmCJ5v3CkN0B9ikaL8QX5BcPnMkNDpT4lyA57tUJhn\nRBiOQUEX7/AJ4Ob15MJ0Q9EH8iWyYzHGWoI/ijl79OEjp//7yto="
    - secure: "WAgGTf29dr0D1b3VCmUtLhIOO/d/lVWOa2hguVR0rssiTHG0tDAdD8ON+euq\nIB6jACVADzCblDYHm72rXGzl4dHretEbb7GeOlzddMjuvanLhvKI9Ol/sjMD\nWAYS+PJh7L3Xg230Oic2P5/iLgmRV21lP0/HP860PFwk5yoliSk="
